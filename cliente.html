<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Registro PRO</title>
    <style>
        body { font-family: sans-serif; padding: 15px; background: #f0f2f5; }
        .box { background: white; padding: 15px; border-radius: 10px; box-shadow: 0 2px 5px rgba(0,0,0,0.1); margin-bottom: 15px; }
        input, select { width: 100%; padding: 12px; margin: 5px 0; border: 1px solid #ccc; border-radius: 5px; box-sizing: border-box; }
        button { width: 100%; padding: 15px; background: #2563eb; color: white; border: none; border-radius: 5px; font-weight: bold; cursor: pointer; }
        table { width: 100%; border-collapse: collapse; background: white; font-size: 13px; }
        th, td { border: 1px solid #ddd; padding: 8px; text-align: left; }
        th { background: #333; color: white; }
        .btn-del { background: #ff4444; padding: 5px 10px; width: auto; font-size: 12px; }
        .btn-clear { background: #777; margin-top: 10px; }
    </style>
</head>
<body>

    <div class="box">
        <h3>üìù Registro Presencial</h3>
        <input type="text" id="n" placeholder="Nombre completo">
        <input type="number" id="d" placeholder="Documento / ID">
        <select id="t"><option>General</option><option>VIP</option></select>
        <button onclick="add()">REGISTRAR</button>
    </div>

    <div class="box">
        <h3>üìä Total: <span id="count">0</span></h3>
        <div style="overflow-x:auto;">
            <table>
                <thead><tr><th>Nombre</th><th>ID</th><th>Acci√≥n</th></tr></thead>
                <tbody id="list"></tbody>
            </table>
        </div>
        <button class="btn-clear" onclick="csv()">üì• DESCARGAR EXCEL</button>
        <button class="btn-clear" style="background:#cc0000" onclick="clearAll()">üóëÔ∏è BORRAR TODO</button>
    </div>

<script>
    let db = JSON.parse(localStorage.getItem('regs')) || [];

    function upd() {
        const list = document.getElementById('list');
        list.innerHTML = db.map((p, i) => `
            <tr>
                <td>${p.n}</td>
                <td>${p.d}</td>
                <td><button class="btn-del" onclick="del(${i})">X</button></td>
            </tr>`).join('');
        document.getElementById('count').innerText = db.length;
        localStorage.setItem('regs', JSON.stringify(db));
    }

    function add() {
        const n = document.getElementById('n').value, d = document.getElementById('d').value, t = document.getElementById('t').value;
        if(!n || !d) return alert('Faltan datos');
        db.unshift({n, d, t});
        document.getElementById('n').value = ''; document.getElementById('d').value = '';
        upd();
    }

    function del(i) {
        if(confirm('¬øEliminar este registro?')) {
            db.splice(i, 1);
            upd();
        }
    }

    function clearAll() {
        if(confirm('¬øEST√ÅS SEGURO? Se borrar√°n todos los datos del evento.')) {
            db = [];
            upd();
        }
    }

    function csv() {
        if(db.length === 0) return alert('No hay datos');
        let content = "data:text/csv;charset=utf-8,Nombre,ID,Tipo\n" + db.map(p => `${p.n},${p.d},${p.t}`).join("\n");
        const link = document.createElement("a");
        link.setAttribute("href", encodeURI(content));
        link.setAttribute("download", "evento.csv");
        link.click();
    }

    upd();
</script>
</body>
</html>

